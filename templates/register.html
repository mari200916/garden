{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | –°–∞–¥ –º–µ—á—Ç—ã</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
<header>
    <h1>–°–ê–î –ú–ï–ß–¢–´!</h1>
    <div class="buttons">
        <button onclick="location.href='/'">–ì–ª–∞–≤–Ω–∞—è</button>
        {% if user.is_authenticated %}
            <span style="margin-left:10px;">–ü—Ä–∏–≤–µ—Ç, {{ user.username }}!</span>
            <button onclick="location.href='{% url 'logout' %}'">–í—ã–π—Ç–∏</button>
        {% endif %}
        <button id="theme-toggle">üåû / üåú</button>
    </div>
</header>

<main class="register-main" style="display:flex; flex-direction:column; align-items:center; justify-content:flex-start; min-height:80vh;">
    <div class="card" style="max-width:400px; width:90%;">
        <h2>–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</h2>
        {% if error %}
            <p style="color:red;">{{ error }}</p>
        {% endif %}
        {% if not user.is_authenticated %}
        <form method="POST" class="register-form">
            {% csrf_token %}
            <input type="text" name="username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required>
            <input type="email" name="email" placeholder="Email" required>
            <input type="password" name="password1" placeholder="–ü–∞—Ä–æ–ª—å" required>
            <input type="password" name="password2" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
            <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </form>

        <hr style="margin:20px 0;">
        <p style="text-align:center;">–ò–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å</p>
        <div class="oauth-container">
            <a href="{% url 'social:begin' 'vk-oauth2' %}" class="oauth-btn">VK</a>
            <a href="{% url 'social:begin' 'google-oauth2' %}" class="oauth-btn">Google</a>
        </div>

        <p style="margin-top:20px; text-align:center;">
            –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="{% url 'login' %}">–í–æ–π—Ç–∏</a>
        </p>
        {% endif %}
    </div>
</main>

<script>
const toggleBtn = document.getElementById('theme-toggle');
const body = document.body;
if(localStorage.getItem('theme') === 'light'){ body.classList.add('light-theme'); }
toggleBtn.addEventListener('click', () => {
    body.classList.toggle('light-theme');
    if(body.classList.contains('light-theme')){
        localStorage.setItem('theme', 'light');
    } else {
        localStorage.setItem('theme', 'dark');
    }
});
</script>
</body>
</html>
